@inject AppState appState

@if (loading)
{
    <div style="width: 100%; height: 100%; top: 0; left: 0; position: fixed; display: block; opacity: 0.4; background-color: #000; z-index: 9999;">
        <div class="" style="top:48%; left:48%; position: absolute;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
}

@code {

    private bool loading;

    protected override void OnInitialized()
    {
        appState.LoadingChanged += OnLoadingChanged;

        base.OnInitialized();
    }

    public void OnLoadingChanged(bool _loading)
    {
        this.loading = _loading;
        StateHasChanged();
    }
}
